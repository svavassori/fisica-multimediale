package ui;import java.awt.*;import util.*;/** * Implements a message box */public class MessageBox extends TrackedDialog  { // Constants for the buttons and the icons    private static final int OK=1,                            CANCEL=2,                            YES=4,                            NO=8,                            INFO=16,                            EXCL=32,                            QUES=64;    public static void message(Component dest, String title, String message)      { MessageBox mb=new MessageBox(title, message, INFO | OK);        mb.dest=(Window)dest;        mb.show(true);        mb.move(100, 50);      }    public static void alert(Component dest, String title, String message)      { MessageBox mb=new MessageBox(title, message, EXCL | OK);        mb.dest=(Window)dest;        mb.show(true);        mb.move(100, 50);      }    public static void confirm(Component dest,                                String title, String message,                               Object confirm)      { MessageBox mb=new MessageBox(title, message, QUES | OK | CANCEL);        mb.dest=(Window)dest;        mb.confirm=confirm;        mb.show(true);        mb.move(100, 50);      }    public static void alert(Component dest,                                String title, String message,                               Object confirm)      { MessageBox mb=new MessageBox(title, message, EXCL | OK | CANCEL);        mb.dest=(Window)dest;        mb.confirm=confirm;        mb.show(true);        mb.move(100, 50);    }    public static void ask(Component dest,                            String title, String message,                           Object yes, Object no)      { MessageBox mb=new MessageBox(title, message, QUES | YES | NO | CANCEL);        mb.dest=(Window)dest;        mb.yes=yes;        mb.no=no;        mb.show(true);        mb.move(100, 50);      }    private Window dest=null;    private Object confirm=null;    private Object yes=null, no=null;    private MessageBox(String title, String message, int flags)      { super(UserInterface.getDummyFrame(), title, true);        ImageLoader il=UserInterface.getImageLoader();        setLayout(new VerticalLayout());        Panel lab_panel=new Panel();        lab_panel.setLayout(new FlowLayout());        if (il!=null)          { if ((flags & INFO) != 0)              lab_panel.add("", new ImageLabel(il.load("icons/info.gif")));            if ((flags & QUES) != 0)              lab_panel.add("", new ImageLabel(il.load("icons/ques.gif")));            if ((flags & EXCL) != 0)              lab_panel.add("", new ImageLabel(il.load("icons/excl.gif")));          }        Panel lab_subpanel=new Panel();        lab_subpanel.setLayout(new GridLayout(0, 1));        Font font=new Font("TimesRoman", Font.BOLD, 16);        while (message.length()>0)        { int i=message.indexOf('\n');          String str;          if (i<0)            { str=message;              message="";            }          else            { str=message.substring(0, i);              message=message.substring(i+1);            }          Label lab=new Label(str);          lab.setFont(font);          lab_subpanel.add("", lab);        }        lab_panel.add("", lab_subpanel);        add("", lab_panel);        Panel pan=new Panel();        LayoutManager lm=new FlowLayout();        pan.setLayout(lm);        if (il==null)          { if ((flags & OK)!=0)              pan.add("", new Button("OK"));            if ((flags & YES)!=0)              pan.add("", new Button("Sì"));            if ((flags & NO)!=0)              pan.add("", new Button("No"));            if ((flags & CANCEL)!=0)              pan.add("", new Button("Annulla"));          }        else          { if ((flags & OK)!=0)              pan.add("", new ImageButton3D("OK", il.load("icons/ok.gif")));            if ((flags & YES)!=0)              pan.add("", new ImageButton3D("Sì", il.load("icons/yes.gif")));            if ((flags & NO)!=0)              pan.add("", new ImageButton3D("No", il.load("icons/no.gif")));            if ((flags & CANCEL)!=0)              pan.add("", new ImageButton3D("Annulla",                                      il.load("icons/cancel.gif")));          }        Component buttons[]=pan.getComponents();        int i;        for(i=0; i<buttons.length; i++)          buttons[i].setFont(font);                add("", pan);        pack();        move(100, 50);      }    public boolean handleEvent(Event evt)      { if (evt.id==Event.WINDOW_DESTROY)          {          	//hide();            dispose();            //dest.toFront();          }        else if (false) // This is to comment out the following code          {            Dimension d=size();            Dimension s=getToolkit().getScreenSize();            move( (s.width-d.width)/2, (s.height-d.height)/2 );          }        return super.handleEvent(evt);      }    public boolean action(Event evt, Object what)      {         if ("OK".equals(what) && dest!=null && confirm!=null)          dest.deliverEvent(new Event(dest, Event.ACTION_EVENT, confirm));        else if ("Sì".equals(what) && dest!=null && yes!=null)          dest.deliverEvent(new Event(dest, Event.ACTION_EVENT, yes));        else if ("No".equals(what) && dest!=null && no!=null)          dest.deliverEvent(new Event(dest, Event.ACTION_EVENT, no));        //hide();        dispose();        //dest.toFront();        return true;      }  }            