package ui;import java.awt.*;/** * A button displaying one or two images * @author Pasquale Foggia * @version 0.99, Dec 1997 */public class ImageLabel extends Canvas  { Image image;    boolean expand=false;    protected int border=0;    protected int padx=0, pady=0;        /**     * @param img  the image displayed     */    public ImageLabel(Image img)      { image=img;        //setBackground(Color.lightGray);      }    /**     * Determines if the images must be expanded to fit the label     * or should keep their original size     */    public void setExpand(boolean expand)      { this.expand=expand;      }    /**      * Determines the border width     */    public void setBorder(int border)      { this.border=border;      }    public synchronized Dimension preferredSize()      { int width, height;        while ((width=image.getWidth(this))<0)          try { wait(); }          catch (InterruptedException e) { }        while ((height=image.getHeight(this))<0)          try { wait(); }          catch (InterruptedException e) { }        return new Dimension(width+2*border+2*padx, height+2*border+2*pady);      }    public synchronized Dimension minimumSize()      { if (expand==true)          return new Dimension(2*border+2*padx+4,2*border+2*pady+4);        else          return preferredSize();      }    public synchronized boolean imageUpdate(Image img, int infoFlags,                                            int x, int y,                                            int width, int height)      { if ((infoFlags & ERROR)!=0)          { System.err.println("Error loading "+img);            System.exit(1);          }          notifyAll();        repaint(50);        return true;    }    public Point getImageUpperLeftCorner () {        Dimension d=preferredSize();        Dimension s=size();        int xx, yy;        d.width-=2*border+2*padx;        d.height-=2*border+2*pady;                if (expand)          { Dimension s1=size();            s1.width-=2*border+2*padx;            s1.height-=2*border+2*pady;            if (s1.width*d.height<s1.height*d.width)              {                 d.height=d.height*s1.width/d.width;                d.width=s1.width;              }            else              { d.width=d.width*s1.height/d.height;                d.height=s1.height;              }          }        xx=(s.width-d.width)/2;        yy=(s.height-d.height)/2;        return new Point(xx,yy);    }        public void paint(Graphics g)      { Dimension d=preferredSize();        Dimension s=size();        int xx, yy;        d.width-=2*border+2*padx;        d.height-=2*border+2*pady;                if (expand)          { Dimension s1=size();            s1.width-=2*border+2*padx;            s1.height-=2*border+2*pady;            if (s1.width*d.height<s1.height*d.width)              {                 d.height=d.height*s1.width/d.width;                d.width=s1.width;              }            else              { d.width=d.width*s1.height/d.height;                d.height=s1.height;              }          }        xx=(s.width-d.width)/2;        yy=(s.height-d.height)/2;        if (expand)          g.drawImage( image, xx, yy, d.width, d.height, this);        else          g.drawImage( image, xx, yy, this);        paintBorder(g);      }    protected void paintBorder(Graphics g)      {       }  }