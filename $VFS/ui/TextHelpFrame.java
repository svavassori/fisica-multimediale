package ui;import java.awt.event.*;import java.awt.*;import java.io.*;/** * A frame displaying a textual help page */class TextHelpFrame extends TrackedDialog implements WindowListener  {     static final String mark="##";    boolean prev_wintrack;    Exit exit;    // WindowEvent Methods    synchronized public void windowDeiconified(WindowEvent e) {        System.out.println("TextHelp deiconified");    }    synchronized public void windowIconified(WindowEvent e) {        System.out.println("TextHelp iconified");    }    synchronized public void windowOpened (WindowEvent e) {        System.out.println("TextHelp open");           }    synchronized public void windowClosing (WindowEvent e) {        System.out.println("TextHelp closing");            }    synchronized public void windowClosed (WindowEvent e) {        System.out.println("TextHelp closed");            }    synchronized public void windowActivated (WindowEvent e) {        System.out.println("TextHelp activated");            }    synchronized public void windowDeactivated (WindowEvent e) {        System.out.println("TextHelp deactivated");        /*removeWindowListener (this);        WindowsTracker.delete(this);        WindowsTracker.adjust();        WindowsTracker.sleep(5000);        dispose();        WindowsTracker.enable(prev_wintrack);*/        //WindowsTracker.enable(prev_wintrack);            }    TextHelpFrame(Exit exit, String fileName, String item)    { super(UserInterface.getDummyFrame(),"Aiuto", true);        //super("Help");        //prev_wintrack=WindowsTracker.isEnabled();        //WindowsTracker.enable(false);        //addWindowListener (this);                this.exit=exit;        Panel panel=new Panel();        Button b=new Button("Chiudi");        b.setFont(new Font("TimesRoman", Font.PLAIN, 14));        panel.add("", b);        add("South", panel);        TextArea text=new TextArea();        text.setBackground(Color.white);        text.setFont(new Font("Courier", Font.PLAIN, 12));        text.setEditable(false);        add("Center", text);        readFile(text, fileName, item);      }    /**     * Read the help item from a file     */    void readFile(TextArea text, String fileName, String item)      { item=mark+item;        try           { FileInputStream fin=new FileInputStream(fileName);            DataInputStream in=new DataInputStream(fin);            String l;            while ((l=in.readLine())!=null &&                   !trim(l).equals(item))              ;            if (l==null)              throw new IOException();            while ((l=in.readLine())!=null &&                   !l.startsWith(mark))              text.appendText(l+"\n");            fin.close();          }        catch (IOException e){             text.setText("Help non disponibile per questo argomento!\n");            text.append("Non ho trovato il file: ");            text.append(fileName);            text.append("oppure l'argomento: ");            text.append(item);        }    }    /**     * Trim the trailing spaces of a string     */    String trim(String s)      { int i=s.length();        while (i>0 && Character.isSpace(s.charAt(i-1)))          i--;        return s.substring(0, i);      }    synchronized public boolean action(Event evt, Object what) {        if ("Chiudi".equals(what)) {          /*WindowsTracker.delete(this);          WindowsTracker.enable(prev_wintrack);*/          dispose();          exit.exit(this, null);        }        return false;    }    synchronized public boolean handleEvent(Event evt) {        if (evt.id==Event.WINDOW_DESTROY) {          /*WindowsTracker.delete(this);          WindowsTracker.enable(prev_wintrack);*/          dispose();          exit.exit(this, null);        }        return super.handleEvent(evt);    }}