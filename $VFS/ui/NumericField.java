package ui;import util.*;import java.awt.*;/** * This class implements a Text Fields which accept only  * (floating point)numbers. */public class NumericField extends TextField  { double min, max;    public NumericField()      { this(6, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY);      }    public NumericField(int cols)      { this(cols, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY);      }    public NumericField(double min, double max)      { this((int)Math.max(6, Math.max((double)(""+min).length() , (double)(""+max).length())),             min, max);      }    public NumericField(int cols, double _min, double _max)      { super(cols+1);        min=_min;         max=_max;      }    public void setValue(double val)      { setText(Format.remove(val, val*10e-5));        checkValue();      }    public double getValue()      { checkValue();        try {          return Double.valueOf(getText()).doubleValue();        } catch (NumberFormatException e) {          return min;        }      }    public boolean handleEvent(Event evt)      { if (evt.id==Event.LOST_FOCUS ||            (evt.id==Event.KEY_PRESS && evt.key=='\n'))          checkValue();        return super.handleEvent(evt);      }    private void checkValue()      { double val;        try          { val=Double.valueOf(getText()).doubleValue();           }        catch (NumberFormatException e)          { val=0;          }        if (val<min)          val=min;        else if (val>max)          val=max;        // setText(""+val);        setText(Format.remove(val, val*10e-5));      }  }