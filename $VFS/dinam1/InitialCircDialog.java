package dinam1;import ui.*;import dinam1.*;import util.*;import java.awt.*;/** * A dialog box to input initial conditions * for circular constrained motion */public class InitialCircDialog extends TrackedDialog  {     Component target;    HelpDisplayer help;    static Font font_small=new Font("TimesRoman", Font.PLAIN, 12);    static Font font_medium=new Font("TimesRoman", Font.PLAIN, 14);    static Font font_large=new Font("TimesRoman", Font.BOLD, 16);    NumericInput vel;    NumericInput massa;     NumericInput pos_rad;    NumericInput pos_deg;    Settings settings;    /**     * Create a new settings dialog. If the user confirms     * the changes, the target component will be notified with     * an action event having a SimulationCirc object as the argument     */    public InitialCircDialog(Component target,                              Settings settings,                             SimulationCirc initial,                             double x, double y)      { super(UserInterface.getDummyFrame(),               "Condizioni iniziali", true);        this.target=target;        this.settings=settings;        help=UserInterface.getHelpDisplayer();        double p=Math.atan2(y, x);        setLayout(new BorderLayout());        Label lab;                //        // Crea il pannello con l'input di massa e posizione        //        Panel panel=new Panel();        panel.setLayout(new VerticalLayout(VerticalLayout.LEFT));        lab=new Label("Massa [kg]");        lab.setFont(font_medium);        panel.add("", lab);        massa=new NumericInput(1, 200, 100, 0.01);        if (initial!=null)          massa.setValue(initial.getMass());        panel.add("", massa);        lab=new Label("Posizione [deg]");        lab.setFont(font_medium);        panel.add("", lab);        pos_deg=new NumericInput(-180, 180, 0, 1);        pos_deg.setValue(p*180/Math.PI);        panel.add("", pos_deg);        lab=new Label("Posizione [rad]");        lab.setFont(font_medium);        panel.add("", lab);        pos_rad=new NumericInput(-181, 181, 0, Math.PI/180);        pos_rad.setValue(p);        panel.add("", pos_rad);        lab=new Label("Velocità iniziale [rad/s]");        lab.setFont(font_medium);        panel.add("", lab);        vel=new NumericInput(-70, 70, 0, 0.1);        if (initial!=null)          vel.setValue(initial.getInitialVel());        panel.add("", vel);        add("Center", panel);        //        // Crea la barra di bottoni in basso        //        ImageLoader il=UserInterface.getImageLoader();        Panel confirm_panel=new Panel();        confirm_panel.setFont(font_large);        confirm_panel.setLayout(new FlowLayout(FlowLayout.LEFT));        confirm_panel.add("", new ImageButton3D("OK",                                   il.load("icons/ok.gif")));        confirm_panel.add("", new ImageButton3D("Annulla",                                   il.load("icons/cancel.gif")));        confirm_panel.add("", new ImageButton3D("Aiuto",                                   il.load("icons/help.gif")));        // add("", confirm_panel);        add("South", confirm_panel);      }    public boolean action(Event evt, Object what)      { if ("OK".equals(what))          { dispose();            SimulationCirc simul=              new SimulationCirc(settings,                                 massa.getValue(),                                 pos_rad.getValue(),                                 vel.getValue());            target.deliverEvent(new Event(target, Event.ACTION_EVENT, simul));          }        else if ("Annulla".equals(what))          { dispose();          }        else if ("Aiuto".equals(what))          { help.displayHelp("help/dinam1", "initcirc");          }        else if (what==pos_deg)          { pos_rad.setValue(pos_deg.getValue()*Math.PI/180);          }        else if (what==pos_rad)          { pos_deg.setValue(pos_rad.getValue()/Math.PI*180);          }        return true;      }    public boolean handleEvent(Event evt)      { if (evt.id == Event.WINDOW_DESTROY)          dispose();        return super.handleEvent(evt);      }  }